
@{
    ViewData["Title"] = @localizer["HomePageTitle"];
}
@* 
<link href="~/lib/sweetalert2/sweetalert2.min.css" rel="stylesheet" />
<script src="~/lib/sweetalert2/sweetalert2.min.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var isFirstTime = sessionStorage.getItem('dashboardFirstTime') !== 'true';

        if (isFirstTime) {
            Swal.fire({
                title: '@localizer["AuthenticationRequiredTitle"]',
                text: '@localizer["AuthenticationRequiredText"]',
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: '@localizer["AuthenticationConfirmButton"]',
                cancelButtonText: '@localizer["AuthenticationCancelButton"]'
            }).then((result) => {
                if (result.isConfirmed) {
                    authenticateToEInvoice();
                } else {
                    // Handle cancellation
                }
            });
        }

        sessionStorage.setItem('dashboardFirstTime', 'true');
    });

    function authenticateToEInvoice() {
        $.ajax({
            url: '/Home/Authenticate',
            type: 'POST',
            data: {},
            success: function (response) {
                Swal.fire('@localizer["AuthenticationSuccessTitle"]', '@localizer["AuthenticationSuccessText"]', 'success');
            },
            error: function (xhr, status, error) {
                Swal.fire('@localizer["AuthenticationErrorTitle"]', '@localizer["AuthenticationErrorText"]', 'error');
            }
        });
    }
</script> *@
