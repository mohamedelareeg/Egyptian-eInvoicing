@{
    ViewData["Title"] = "Home Page";
}

<link href="~/lib/sweetalert2/sweetalert2.min.css" rel="stylesheet" />
<script src="~/lib/sweetalert2/sweetalert2.min.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var isFirstTime = sessionStorage.getItem('dashboardFirstTime') !== 'true';

        if (isFirstTime) {
            Swal.fire({
                title: 'Authentication Required',
                text: 'Do you want to authenticate to E-Invoice?',
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: 'Authenticate',
                cancelButtonText: 'Cancel'
            }).then((result) => {
                if (result.isConfirmed) {
                    authenticateToEInvoice();
                } else {
                   
                }
            });
        }

        sessionStorage.setItem('dashboardFirstTime', 'true');
    });

    function authenticateToEInvoice() {
        $.ajax({
            url: '/Home/Authenticate',
            type: 'POST',
            data: {
            },
            success: function (response) {
                Swal.fire('Authenticated!', 'You have been authenticated to E-Invoice.', 'success');
            },
            error: function (xhr, status, error) {
                Swal.fire('Error!', 'Failed to authenticate to E-Invoice.', 'error');
            }
        });
    }
</script>

